(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{197:function(e,t,a){"use strict";a.r(t);var r=a(194),n=a(60),c=a.n(n),s=a(195),i=a(61),u=a(152),o=a(153),l=a(196),d=a(193),m=a(0),f=a.n(m),p=a(87),b=a(62),v=a(56),g=a(65),h=a.n(g),x=a(112),E=a(99),j=a(100),O=a(102),k=a(101),w=a(66),y=function(e){var t=e.onSubmit,a=e.disabled;Object(x.a)(e,["onSubmit","disabled"]);return f.a.createElement(E.a,{onSubmit:t},f.a.createElement(j.a,null,f.a.createElement(O.a,{for:"form_user_id"},"select user id"),f.a.createElement(k.a,{type:"number",name:"user_id",id:"form_user_id",placeholder:"select user id"})),f.a.createElement(w.a,{disabled:a,type:"submit",color:"primary"}," update"))},_=a(20),F=a(53),S=a(54),C=a(55),D=a(103),N=a(105),T=a(7),M=a.n(T),I=a(154),R=a.n(I),U=[{dataField:"id",text:"ID"},{dataField:"sender_id",text:"sender"},{dataField:"receiver_id",text:"receiver"},{dataField:"subject",text:"subject"},{dataField:"created_at",text:"created",formatter:function(e,t,a){return new Date(e).toLocaleString()}}],J=function(e){var t=e.sent,a=e.received,r=e.deleteMassage,n=(Object(x.a)(e,["sent","received","deleteMassage"]),Object(m.useState)("sent")),c=Object(_.a)(n,2),s=c[0],i=c[1],u=function(e){s!==e&&i(e)},o=[].concat(U,[{dataField:"actions",text:"",formatter:function(e,t,a){return f.a.createElement(m.Fragment,null,f.a.createElement(w.a,{color:"danger",onClick:r(t.id,"sent")},"Delete"))}}]),l=[].concat(U,[{dataField:"actions",text:"",formatter:function(e,t,a){return f.a.createElement(m.Fragment,null,f.a.createElement(w.a,{color:"danger",onClick:r(t.id,"receiver")},"Delete"))}}]),d={renderer:function(e){return f.a.createElement("div",null,f.a.createElement("p",null,e.content))},showExpandColumn:!0};return f.a.createElement("div",{className:"my-4"},f.a.createElement(F.a,{tabs:!0},f.a.createElement(S.a,null,f.a.createElement(C.a,{className:M()({active:"sent"===s}),onClick:function(){u("sent")}},"sent")),f.a.createElement(S.a,null,f.a.createElement(C.a,{className:M()({active:"received"===s}),onClick:function(){u("received")}},"received"))),f.a.createElement(D.a,{className:"pt-4",activeTab:s},f.a.createElement(N.a,{tabId:"sent"},f.a.createElement(R.a,{bootstrap4:!0,classes:"table-responsive-sm",data:t,keyField:"id",columns:o,expandRow:d})),f.a.createElement(N.a,{tabId:"received"},f.a.createElement(R.a,{classes:"table-responsive-sm",bootstrap4:!0,data:a,keyField:"id",expandRow:d,columns:l}))))},L=a(77),P=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={current_user:!1,loading:!1,sent:[],received:[]},e.onDeleteMassage=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sent";return function(){var r=Object(i.a)(c.a.mark((function r(n){var i,u,o,l;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.stopPropagation(),r.next=3,h()();case 3:if(r.sent){r.next=5;break}return r.abrupt("return");case 5:return e.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!0})})),(i=new FormData).set("user_id",e.state.current_user),i.set("message_id",t),i.set("user_type",a),r.prev=10,r.next=13,L.a.post("/delete-message",i,{headers:{"Content-Type":"multipart/form-data"}});case 13:if(200===r.sent.status){r.next=16;break}return r.abrupt("return");case 16:u=e.state,o=u.sent,l=u.received,r.t0=a,r.next="sent"===r.t0?20:"receiver"===r.t0?22:24;break;case 20:return o=o.filter((function(e){return e.id!==t})),r.abrupt("break",24);case 22:return l=l.filter((function(e){return e.id!==t})),r.abrupt("break",24);case 24:e.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{received:l,sent:o})})),r.next=29;break;case 27:r.prev=27,r.t1=r.catch(10);case 29:return r.prev=29,e.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{loading:!1})})),r.finish(29);case 32:case"end":return r.stop()}}),r,null,[[10,27,29,32]])})));return function(e){return r.apply(this,arguments)}}()},e.onChangeUser=function(){var t=Object(i.a)(c.a.mark((function t(a){var n,i,u,o,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=new FormData(a.target),i=Number(n.get("user_id")),!Number.isInteger(i)||0===i){t.next=15;break}return e.setState((function(e){return{current_user:i,loading:!0}})),t.prev=5,t.next=8,L.a.post("/get-messages",n,{headers:{"Content-Type":"multipart/form-data"}});case 8:200===(u=t.sent).status&&(o=u.data,l=o.sent,d=o.received,e.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{sent:Object(r.a)(l),received:Object(r.a)(d),loading:!1})}))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{current_user:!1,sent:[],received:[],loading:!1})}));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"render",value:function(){return f.a.createElement(p.a,null,f.a.createElement("h1",{className:"text-center py-4"},"Mange Email"),f.a.createElement(b.a,{timeout:500,in:this.state.loading,className:"mt-3"},f.a.createElement(v.a,{color:"success"})),f.a.createElement(y,{disabled:this.state.loading,onSubmit:this.onChangeUser}),this.state.current_user&&f.a.createElement(J,{sent:this.state.sent,received:this.state.received,deleteMassage:this.onDeleteMassage}))}}]),a}(f.a.Component);t.default=P},77:function(e,t,a){"use strict";var r=a(60),n=a.n(r),c=a(61),s=a(78),i=a.n(s),u=a(0),o=a.n(u),l=a(65),d=a.n(l),m=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.response.status)>=400&&a<=600)){e.next=7;break}return r=t.response.data,c=(r=void 0===r?{}:r).error,s=void 0!==c&&c,e.next=7,d()({title:"Server Error ".concat(a,"  - ").concat(t.config.url),message:o.a.createElement("div",null,o.a.createElement("p",null,s||t.message)),confirmText:"OK",confirmColor:"info",cancelText:null});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,s,i=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:"response",r=t.data,c=(r=void 0===r?{}:r).error,!(s=void 0!==c&&c)){e.next=7;break}return e.next=7,d()({title:"Error - "+a,message:s,confirmText:"Ok!",confirmColor:"info",cancelText:null});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var p=i.a.create();p.defaults.baseURL="/api",p.interceptors.response.use(function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.config.url,e.next=3,f(t,a);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:return e.abrupt("return",Promise.reject(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());t.a=p}}]);
//# sourceMappingURL=6.634e1c58.chunk.js.map